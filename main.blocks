<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable id="3UT{RjLShXrJ[IDGq}xI">MAX30102_I2C_ADDRESS</variable><variable id="#W`LsJ/ueQiF{5|iS2o3">MAX30102_MODE_CONFIG</variable><variable id="Qq3:;oI:aGoPvEna?(GL">MAX30102_PARTICLE_CONFIG</variable><variable id="Toozgh04V=9V_2y@J)F,">MAX30102_LED_CONFIG</variable><variable id="{V_?PjYC_d/4CLF7U-ow">data</variable><variable id="9wvx[F8Vn8Nv+j{jL}O7">x</variable><variable id="FQ@}Zc-Ha`ihK@:aAbyR">y</variable><variable id="35whxutsuql)fRSd#=2N">z</variable><variable id="Zhfx_O3}!1gCpf1]1@(r">temp</variable><variable id="I8$e2+z@!L,FUt-wLB?m">sensorData</variable></variables><block type="pxt-on-start" id="d=^a{u*G`0y8]OMY9fz[" x="0" y="0"><statement name="HANDLER"><block type="basic_show_icon" id="4[q,XkVH9d?Kw4r]bu.i"><field name="i">IconNames.Heart</field><next><block type="variables_set" id="{G`;ct@Q:W6$e3~-jv60"><field name="VAR" id="3UT{RjLShXrJ[IDGq}xI">MAX30102_I2C_ADDRESS</field><comment pinned="false" h="80" w="160">Dirección I2C del MAX30102
Cambia a 0x57 si esa es la dirección correcta</comment><value name="VALUE"><shadow type="math_number" id=".(s$WwnQn=GBpZS#;#j+"><field name="NUM">104</field></shadow></value><next><block type="variables_set" id="19f8~-gmIP-*5ELU`m,?"><field name="VAR" id="#W`LsJ/ueQiF{5|iS2o3">MAX30102_MODE_CONFIG</field><comment pinned="false" h="80" w="160">Registro de configuración del MAX30102</comment><value name="VALUE"><shadow type="math_number" id="h~{gr7Ulu[a3k/e4_G%A"><field name="NUM">9</field></shadow></value><next><block type="variables_set" id="ZzU6+!q+C$#)Dl^G)OOu"><field name="VAR" id="Toozgh04V=9V_2y@J)F,">MAX30102_LED_CONFIG</field><value name="VALUE"><shadow type="math_number" id="%IHPvM-Ug;,/i!nCi$=]"><field name="NUM">10</field></shadow></value><next><block type="variables_set" id="x9mnk#KTj~g:pX-]Qw+C"><field name="VAR" id="Qq3:;oI:aGoPvEna?(GL">MAX30102_PARTICLE_CONFIG</field><value name="VALUE"><shadow type="math_number" id="YO]9F~j@b1zkDHJ:m@#j"><field name="NUM">11</field></shadow></value><next><block type="bluetooth_start_uart_service" id="U=SKw+=4g!0m6m}q6pyx"><comment pinned="false" h="80" w="160">Inicializar Bluetooth</comment><next><block type="function_call" id="3LYDPY[yg1?}bmN?Q:]c"><mutation name="setupMAX30102" functionid="a[ZWAPNoGuq`HTsy20Q3"></mutation><comment pinned="false" h="80" w="160">Configuración inicial del sensor</comment></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="device_forever" id="SO@F}yL9RZp,pO2^4pnN" x="438" y="0"><statement name="HANDLER"><block type="variables_set" id="_,`K-)NkVk08lOcr7lg}"><field name="VAR" id="9wvx[F8Vn8Nv+j{jL}O7">x</field><comment pinned="false" h="80" w="160">Leer valores del acelerómetro</comment><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="device_acceleration" id="A1aeU.pM5W+0@1wkJe)_"><field name="NAME">Dimension.X</field></block></value><next><block type="variables_set" id="V?$I#wSd33sE$b5#sp.U"><field name="VAR" id="FQ@}Zc-Ha`ihK@:aAbyR">y</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="device_acceleration" id="|lz8w^ECGe9f/J%?2#,%"><field name="NAME">Dimension.Y</field></block></value><next><block type="variables_set" id="L6ZKoe~94{L~Q/Wj*p@`"><field name="VAR" id="35whxutsuql)fRSd#=2N">z</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="device_acceleration" id="Xsf5!.Ie+`GnC+RoPr3g"><field name="NAME">Dimension.Z</field></block></value><next><block type="variables_set" id="R7@`hC?P^uz05Eg_d5d3"><field name="VAR" id="Zhfx_O3}!1gCpf1]1@(r">temp</field><comment pinned="false" h="80" w="160">Leer temperatura del sensor interno</comment><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="device_temperature" id="N^p_r12GgtdFr!k6KT,K"></block></value><next><block type="variables_set" id="ye,nrqDgkKxwVih_Ek.]"><field name="VAR" id="I8$e2+z@!L,FUt-wLB?m">sensorData</field><comment pinned="false" h="80" w="160">Leer datos del sensor MAX30102</comment><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="function_call_output" id="6Iq,o!!9#N15;pUez(|6"><mutation name="readSensorData" functionid="BOq.rVg7bu{g8KgFuOwH"></mutation></block></value><next><block type="bluetooth_uart_write" id="jaY)!I_)x.Q7,Y(zZS$M"><comment pinned="false" h="80" w="160">Enviar datos por Bluetooth</comment><value name="data"><block type="text_join" id="r_KEy1X)tU:]u?RaoM)#"><mutation items="3"></mutation><value name="ADD0"><shadow type="text" id="O+y!om0]m4J6|AHN{h(H"><field name="TEXT">Aceleración X: </field></shadow></value><value name="ADD1"><shadow type="text"><field name="TEXT"></field></shadow><block type="variables_get" id="be[GSTSET(*_X7teg|Mf"><field name="VAR" id="9wvx[F8Vn8Nv+j{jL}O7">x</field></block></value><value name="ADD2"><shadow type="text"><field name="TEXT"></field></shadow><block type="typescript_expression" id="d`]h,?qzQL^aB+=S?c1," editable="false"><field name="EXPRESSION">" mg\n"</field></block></value></block></value><next><block type="bluetooth_uart_write" id="b@Sns1f61kRG.R9_TXq@"><value name="data"><block type="text_join" id="/*5Iw`LETWg|Z6-0syzX"><mutation items="3"></mutation><value name="ADD0"><shadow type="text" id="CMvcM55{wVr.JI%.o.gL"><field name="TEXT">Aceleración Y: </field></shadow></value><value name="ADD1"><shadow type="text"><field name="TEXT"></field></shadow><block type="variables_get" id="khJoy{Y|O9Z!GWjp~o6v"><field name="VAR" id="FQ@}Zc-Ha`ihK@:aAbyR">y</field></block></value><value name="ADD2"><shadow type="text"><field name="TEXT"></field></shadow><block type="typescript_expression" id="M./YFkoJ9Qa0c#u[0veP" editable="false"><field name="EXPRESSION">" mg\n"</field></block></value></block></value><next><block type="bluetooth_uart_write" id="s1`1dZQ[.L%D5+YVyZ#x"><value name="data"><block type="text_join" id="mlC2/$ms(w;U,%`VWAsl"><mutation items="3"></mutation><value name="ADD0"><shadow type="text" id="5PLv*k8]m4sQ|yuY.3Fa"><field name="TEXT">Aceleración Z: </field></shadow></value><value name="ADD1"><shadow type="text"><field name="TEXT"></field></shadow><block type="variables_get" id="5B%p0R^tFc3UbWq-r}h#"><field name="VAR" id="35whxutsuql)fRSd#=2N">z</field></block></value><value name="ADD2"><shadow type="text"><field name="TEXT"></field></shadow><block type="typescript_expression" id="3MMd~T0wcxGg-@[i)pFu" editable="false"><field name="EXPRESSION">" mg\n"</field></block></value></block></value><next><block type="bluetooth_uart_write" id="QE=JSzj[kVovWlP7$fmO"><value name="data"><block type="text_join" id="XEsdS/@cf;I}HX*(sgLN"><mutation items="3"></mutation><value name="ADD0"><shadow type="text" id="IA6:Xt.q*7K#qr]X1$@."><field name="TEXT">Temperatura: </field></shadow></value><value name="ADD1"><shadow type="text"><field name="TEXT"></field></shadow><block type="variables_get" id="+3Fc?Kh9;V^$5[XeEABQ"><field name="VAR" id="Zhfx_O3}!1gCpf1]1@(r">temp</field></block></value><value name="ADD2"><shadow type="text"><field name="TEXT"></field></shadow><block type="typescript_expression" id="Ix`KPauaQG(i-Y8}4PW+" editable="false"><field name="EXPRESSION">" °C\n"</field></block></value></block></value><next><block type="bluetooth_uart_write" id="7AMni:*w3qOW=%SobytF"><value name="data"><block type="text_join" id="5tZf,v]ZOg]DdV*_PQRY"><mutation items="3"></mutation><value name="ADD0"><shadow type="text" id="Eh1nEe5Pl.ae72Ci!edC"><field name="TEXT">Datos del MAX30102: </field></shadow></value><value name="ADD1"><shadow type="text"><field name="TEXT"></field></shadow><block type="variables_get" id="bO%L]ud+gVQ3pg`+.kkY"><field name="VAR" id="I8$e2+z@!L,FUt-wLB?m">sensorData</field></block></value><value name="ADD2"><shadow type="text"><field name="TEXT"></field></shadow><block type="typescript_expression" id="$xW[try$H#10DX$h}y-i" editable="false"><field name="EXPRESSION">"\n"</field></block></value></block></value><next><block type="device_print_message" id="w:|j6|/(r#CA6_[~e}3k"><comment pinned="false" h="80" w="160">Mostrar datos en la pantalla de la micro:bit</comment><value name="text"><block type="text_join" id="A;kMA5g5[G;)PRCsP8,+"><mutation items="2"></mutation><value name="ADD0"><shadow type="text" id="{W;a3SBL/VZUc%,taG8V"><field name="TEXT">X:</field></shadow></value><value name="ADD1"><shadow type="text"><field name="TEXT"></field></shadow><block type="variables_get" id="vV3u?RsLOfW`gO*|7|ZL"><field name="VAR" id="9wvx[F8Vn8Nv+j{jL}O7">x</field></block></value></block></value><next><block type="device_pause" id="KnNI}REDIUio)kK,Y~gG"><value name="pause"><shadow type="timePicker" id="i-$632#4]@?=b}Cb{)xn"><field name="ms">1000</field></shadow></value><next><block type="device_print_message" id="6,8{llxqV~5wa[%JK71["><value name="text"><block type="text_join" id="#0JJD$fCHZ_pBZW=W_Vu"><mutation items="2"></mutation><value name="ADD0"><shadow type="text" id="Hq6|9diMjijv_}DP4T~t"><field name="TEXT">T:</field></shadow></value><value name="ADD1"><shadow type="text"><field name="TEXT"></field></shadow><block type="variables_get" id=";*SxbQyU({f=_$B820Bf"><field name="VAR" id="Zhfx_O3}!1gCpf1]1@(r">temp</field></block></value></block></value><next><block type="device_pause" id="sm:G{t0rq@}9fhfufo]D"><value name="pause"><shadow type="timePicker" id="vzz*[Nyd_EyJMV#5GZ#j"><field name="ms">1000</field></shadow></value><next><block type="device_print_message" id="0Am55e#QIkKyOYl$h@f,"><value name="text"><block type="text_join" id="Ysqi6y)}@9aV|e6h21~b"><mutation items="2"></mutation><value name="ADD0"><shadow type="text" id="+H+q@{w.BASUlLvkyjW8"><field name="TEXT">S:</field></shadow></value><value name="ADD1"><shadow type="text"><field name="TEXT"></field></shadow><block type="variables_get" id="b~O|d(#~/}ZzQ./z%n$|"><field name="VAR" id="I8$e2+z@!L,FUt-wLB?m">sensorData</field></block></value></block></value><next><block type="device_pause" id="rUqH;qvC#Z?}$]GSa8?4"><value name="pause"><shadow type="timePicker" id="o)6r;fc5$UvAU%Vz6v%9"><field name="ms">1000</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="function_definition" id="lU(#9%c55/eDJD}c,[j*" x="1310" y="0"><mutation name="setupMAX30102" functionid="a[ZWAPNoGuq`HTsy20Q3"></mutation><field name="function_name">setupMAX30102</field><comment pinned="false" h="80" w="160">Configuración inicial del MAX30102</comment><statement name="STACK"><block type="i2c_writenumber" id="|NYZhPldc(b5#4BmU}Hc"><field name="format">NumberFormat.UInt8LE</field><comment pinned="false" h="80" w="160">Resetear el sensor</comment><value name="address"><block type="variables_get" id="4Z:@1mCutFTu-R!RfL]G"><field name="VAR" id="3UT{RjLShXrJ[IDGq}xI">MAX30102_I2C_ADDRESS</field></block></value><value name="value"><block type="variables_get" id="*jFun^O@K=XHKGzhGc6i"><field name="VAR" id="#W`LsJ/ueQiF{5|iS2o3">MAX30102_MODE_CONFIG</field></block></value><value name="repeat"><shadow type="logic_boolean" id="m1S9EzYM7+4/*3.K~S7F"><field name="BOOL">FALSE</field></shadow></value><next><block type="i2c_writenumber" id="h5yMnGzd-[83~WmE@|Ck"><field name="format">NumberFormat.UInt8LE</field><value name="address"><block type="variables_get" id="f]tV_S(frB}*vYYf!wpx"><field name="VAR" id="3UT{RjLShXrJ[IDGq}xI">MAX30102_I2C_ADDRESS</field></block></value><value name="value"><shadow type="math_number" id=":WSn4v8nWBixBJjgo.6T"><field name="NUM">64</field></shadow></value><value name="repeat"><shadow type="logic_boolean" id="jC#@olr3{2NJ@xas37wZ"><field name="BOOL">FALSE</field></shadow></value><next><block type="device_pause" id="+LSR*y:@^IHG2Bu40!bM"><value name="pause"><shadow type="timePicker" id=",YOl^xTed%mgUm2=v+n2"><field name="ms">100</field></shadow></value><next><block type="i2c_writenumber" id="sIzsZ;e0-Z/rny0rIJZo"><field name="format">NumberFormat.UInt8LE</field><comment pinned="false" h="80" w="160">Configurar modo de SpO2</comment><value name="address"><block type="variables_get" id="BI5yz*BNO_hZRsLw.!aU"><field name="VAR" id="3UT{RjLShXrJ[IDGq}xI">MAX30102_I2C_ADDRESS</field></block></value><value name="value"><block type="variables_get" id="d}`+Cia)@=|em_0}7s~/"><field name="VAR" id="Qq3:;oI:aGoPvEna?(GL">MAX30102_PARTICLE_CONFIG</field></block></value><value name="repeat"><shadow type="logic_boolean" id="hfhT+iFIJ_Idk^dt_b_8"><field name="BOOL">FALSE</field></shadow></value><next><block type="i2c_writenumber" id="a`5B/lOFZuW9H0Rkd?-_"><field name="format">NumberFormat.UInt8LE</field><value name="address"><block type="variables_get" id="b_ZsDh;Fw?a?Y^F*1:Xn"><field name="VAR" id="3UT{RjLShXrJ[IDGq}xI">MAX30102_I2C_ADDRESS</field></block></value><value name="value"><shadow type="math_number" id="2xfr?:B?X4p7C7z1^!(6"><field name="NUM">3</field></shadow></value><value name="repeat"><shadow type="logic_boolean" id="B3vYsky6kk8jmSSppflU"><field name="BOOL">FALSE</field></shadow></value><next><block type="device_pause" id="BLKb~2(p`|:E[AM$b:l("><value name="pause"><shadow type="timePicker" id="fYJA```L99MJ?(F2Fhi8"><field name="ms">100</field></shadow></value><next><block type="i2c_writenumber" id="UYjc/J,j9k59N`hn(z2W"><field name="format">NumberFormat.UInt8LE</field><comment pinned="false" h="80" w="160">Configurar LEDs</comment><value name="address"><block type="variables_get" id="]s7#OI#oUM_JkTYt$89T"><field name="VAR" id="3UT{RjLShXrJ[IDGq}xI">MAX30102_I2C_ADDRESS</field></block></value><value name="value"><block type="variables_get" id="i(Cs_=nYU.L*U=ro1gU-"><field name="VAR" id="Toozgh04V=9V_2y@J)F,">MAX30102_LED_CONFIG</field></block></value><value name="repeat"><shadow type="logic_boolean" id="d2B06x5w[))mlYf77761"><field name="BOOL">FALSE</field></shadow></value><next><block type="i2c_writenumber" id="m^D$Q~zQ:6KSU1K~E$Y2"><field name="format">NumberFormat.UInt8LE</field><comment pinned="false" h="80" w="160">Intensidad del LED rojo</comment><value name="address"><block type="variables_get" id="sFh;~gTz[+{S2=th3N:."><field name="VAR" id="3UT{RjLShXrJ[IDGq}xI">MAX30102_I2C_ADDRESS</field></block></value><value name="value"><shadow type="math_number" id="lRjudAf)pl}hmL-5vUpC"><field name="NUM">36</field></shadow></value><value name="repeat"><shadow type="logic_boolean" id="^_4=J`C^yd;iKL]xxM@="><field name="BOOL">FALSE</field></shadow></value><next><block type="i2c_writenumber" id="We;.Yxgqj9Iz`f2r!C^7"><field name="format">NumberFormat.UInt8LE</field><comment pinned="false" h="80" w="160">Intensidad del LED IR</comment><value name="address"><block type="variables_get" id="_|x}Z5niZ?/;~sFXi/M#"><field name="VAR" id="3UT{RjLShXrJ[IDGq}xI">MAX30102_I2C_ADDRESS</field></block></value><value name="value"><shadow type="math_number" id="K710e2!KFrUu)Ly.{*I$"><field name="NUM">36</field></shadow></value><value name="repeat"><shadow type="logic_boolean" id="5dRvDRe:|Rh0m[*A=Jm$"><field name="BOOL">FALSE</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="function_definition" id="(eZgLJ$,-?MTyPx!xpRt" x="1738" y="0"><mutation name="readSensorData" functionid="BOq.rVg7bu{g8KgFuOwH"></mutation><field name="function_name">readSensorData</field><comment pinned="false" h="80" w="160">Leer datos del sensor MAX30102</comment><statement name="STACK"><block type="i2c_writenumber" id="Y~,VUooR)-3/c(hJe}$l"><field name="format">NumberFormat.UInt8LE</field><value name="address"><block type="variables_get" id="c?T/7(8`SE[4FT?P(2z?"><field name="VAR" id="3UT{RjLShXrJ[IDGq}xI">MAX30102_I2C_ADDRESS</field></block></value><value name="value"><shadow type="math_number" id="KX2F;YsbKZu1rftQ5^93"><field name="NUM">6</field></shadow></value><value name="repeat"><shadow type="logic_boolean" id="q|`$$Skhilpu*G*nEp$2"><field name="BOOL">FALSE</field></shadow></value><next><block type="variables_set" id="`#)o!_ve09Z]xS93TXF)"><field name="VAR" id="{V_?PjYC_d/4CLF7U-ow">data</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="pins_i2c_readnumber" id="T],c^)X5m{LO+pRnb+z2"><field name="format">NumberFormat.UInt16BE</field><value name="address"><block type="variables_get" id="66eJMKXdX@kpEu5TGTVs"><field name="VAR" id="3UT{RjLShXrJ[IDGq}xI">MAX30102_I2C_ADDRESS</field></block></value><value name="repeat"><shadow type="logic_boolean" id="LRXkdCn$@?rjHRwjB{V@"><field name="BOOL">FALSE</field></shadow></value></block></value><next><block type="function_return" id="KsZljG0i_QB?wX}X:~=6"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="-Cl5C58VI4r|2Gh640YK"><field name="VAR" id="{V_?PjYC_d/4CLF7U-ow">data</field></block></value></block></next></block></next></block></statement></block></xml>