<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable id="3UT{RjLShXrJ[IDGq}xI">MAX30102_I2C_ADDRESS</variable><variable id="#W`LsJ/ueQiF{5|iS2o3">MAX30102_MODE_CONFIG</variable><variable id="Qq3:;oI:aGoPvEna?(GL">MAX30102_PARTICLE_CONFIG</variable><variable id="Toozgh04V=9V_2y@J)F,">MAX30102_LED_CONFIG</variable><variable id="{V_?PjYC_d/4CLF7U-ow">data</variable><variable id="9wvx[F8Vn8Nv+j{jL}O7">x</variable><variable id="FQ@}Zc-Ha`ihK@:aAbyR">y</variable><variable id="35whxutsuql)fRSd#=2N">z</variable><variable id="Zhfx_O3}!1gCpf1]1@(r">temp</variable><variable id="I8$e2+z@!L,FUt-wLB?m">sensorData</variable></variables><block type="pxt-on-start" id="45w_~-`I4_bBPS,:(`-}" x="0" y="0"><statement name="HANDLER"><block type="basic_show_icon" id="bsx2^xO.m3fvm_otB5yE"><field name="i">IconNames.Heart</field><next><block type="variables_set" id="K[cvK9B65K:cY^[P[iiQ"><field name="VAR" id="3UT{RjLShXrJ[IDGq}xI">MAX30102_I2C_ADDRESS</field><comment pinned="false" h="80" w="160">Dirección I2C del MAX30102
Cambia a 0x57 si esa es la dirección correcta</comment><value name="VALUE"><shadow type="math_number" id="PZOG?[t!=3V,VGz0%pwz"><field name="NUM">104</field></shadow></value><next><block type="variables_set" id="f-X/WV{z(XED,I-pSE(B"><field name="VAR" id="#W`LsJ/ueQiF{5|iS2o3">MAX30102_MODE_CONFIG</field><comment pinned="false" h="80" w="160">Registro de configuración del MAX30102</comment><value name="VALUE"><shadow type="math_number" id="Er/)}8j|r~H?p=WO{IOW"><field name="NUM">9</field></shadow></value><next><block type="variables_set" id="8;y6kZsR-3Ia|{ofKiXs"><field name="VAR" id="Toozgh04V=9V_2y@J)F,">MAX30102_LED_CONFIG</field><value name="VALUE"><shadow type="math_number" id="FT9pJ2ddR$=e~;+$hY,6"><field name="NUM">10</field></shadow></value><next><block type="variables_set" id="[-LUlQ*O9d}rgxURv9P["><field name="VAR" id="Qq3:;oI:aGoPvEna?(GL">MAX30102_PARTICLE_CONFIG</field><value name="VALUE"><shadow type="math_number" id="4NgYq;0*Ew,V^wT91.h?"><field name="NUM">11</field></shadow></value><next><block type="bluetooth_start_uart_service" id="pcx%Xku[?Nj39SIPcr`f"><comment pinned="false" h="80" w="160">Inicializar Bluetooth</comment><next><block type="function_call" id="vd5K.]3~b:vpjuF4_dD="><mutation name="setupMAX30102" functionid="a[ZWAPNoGuq`HTsy20Q3"></mutation><comment pinned="false" h="80" w="160">Configuración inicial del sensor</comment></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="device_forever" id="g%wbgc]rA.purVi~b2q$" x="438" y="0"><statement name="HANDLER"><block type="variables_set" id="I[KbJ7$Ljn+uu*OdO83J"><field name="VAR" id="9wvx[F8Vn8Nv+j{jL}O7">x</field><comment pinned="false" h="80" w="160">Leer valores del acelerómetro</comment><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="device_acceleration" id="||97ov,98I-7Hq*Ji!b#"><field name="NAME">Dimension.X</field></block></value><next><block type="variables_set" id="6WzU;@~@_Z$imgbiz]At"><field name="VAR" id="FQ@}Zc-Ha`ihK@:aAbyR">y</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="device_acceleration" id="~,}O29XE+6l$O7jT{g`#"><field name="NAME">Dimension.Y</field></block></value><next><block type="variables_set" id="D7W4bRZ!ak3S+#y^FdyZ"><field name="VAR" id="35whxutsuql)fRSd#=2N">z</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="device_acceleration" id="5ohJ)LjhNm?hj=TU#U9A"><field name="NAME">Dimension.Z</field></block></value><next><block type="variables_set" id="/1=3%j;Zs81li,DMB~__"><field name="VAR" id="Zhfx_O3}!1gCpf1]1@(r">temp</field><comment pinned="false" h="80" w="160">Leer temperatura del sensor interno</comment><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="device_temperature" id="VDg`F63A{$c2.E~kG+yJ"></block></value><next><block type="variables_set" id="!XbWi#pkw*):tVEj-8e/"><field name="VAR" id="I8$e2+z@!L,FUt-wLB?m">sensorData</field><comment pinned="false" h="80" w="160">Leer datos del sensor MAX30102</comment><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="function_call_output" id="AbHdeQhpW7Fm.2{aoX~s"><mutation name="readSensorData" functionid="BOq.rVg7bu{g8KgFuOwH"></mutation></block></value><next><block type="bluetooth_uart_write" id="0RB_1}fy9`:wpxl7wM8v"><comment pinned="false" h="80" w="160">Enviar datos por Bluetooth</comment><value name="data"><block type="text_join" id="lqnn[o4~c@5@OW!U/eyE"><mutation items="3"></mutation><value name="ADD0"><shadow type="text" id="JnTTW+SPt-?IC[MJ*6py"><field name="TEXT">Aceleración X: </field></shadow></value><value name="ADD1"><shadow type="text"><field name="TEXT"></field></shadow><block type="variables_get" id="$)0Y5$Q@|t7kB69h~ZHr"><field name="VAR" id="9wvx[F8Vn8Nv+j{jL}O7">x</field></block></value><value name="ADD2"><shadow type="text"><field name="TEXT"></field></shadow><block type="typescript_expression" id="C;w2QEPFR.jQxg*,xKGL" editable="false"><field name="EXPRESSION">" mg\n"</field></block></value></block></value><next><block type="bluetooth_uart_write" id="/}n/P{L4CWg*+e$qLW+3"><value name="data"><block type="text_join" id="at(11,7%4n=9oNmT3tG9"><mutation items="3"></mutation><value name="ADD0"><shadow type="text" id="@:CBAR`u7pSQwTrlhX32"><field name="TEXT">Aceleración Y: </field></shadow></value><value name="ADD1"><shadow type="text"><field name="TEXT"></field></shadow><block type="variables_get" id="sN{{yQ4!Bm+j87]4YyiB"><field name="VAR" id="FQ@}Zc-Ha`ihK@:aAbyR">y</field></block></value><value name="ADD2"><shadow type="text"><field name="TEXT"></field></shadow><block type="typescript_expression" id="8*CmGzSV`sO7TZff[W.(" editable="false"><field name="EXPRESSION">" mg\n"</field></block></value></block></value><next><block type="bluetooth_uart_write" id="*:K(Nh*bfZ`-i+P|ccSN"><value name="data"><block type="text_join" id=":kI`ru?NogiJE~2^H~e2"><mutation items="3"></mutation><value name="ADD0"><shadow type="text" id="FuC}s{l@^4xEMv6VF:_S"><field name="TEXT">Aceleración Z: </field></shadow></value><value name="ADD1"><shadow type="text"><field name="TEXT"></field></shadow><block type="variables_get" id="1ET9(?$=$91EE]38iwwp"><field name="VAR" id="35whxutsuql)fRSd#=2N">z</field></block></value><value name="ADD2"><shadow type="text"><field name="TEXT"></field></shadow><block type="typescript_expression" id="z3~B7VU.o%Q4|M!hp31A" editable="false"><field name="EXPRESSION">" mg\n"</field></block></value></block></value><next><block type="bluetooth_uart_write" id="nl0E?/{sZqs,AbP)~?7Y"><value name="data"><block type="text_join" id="#lanmx~(.b1ku5Kui;_r"><mutation items="3"></mutation><value name="ADD0"><shadow type="text" id="sSAm-AO%jx(M{TU}AB9T"><field name="TEXT">Temperatura: </field></shadow></value><value name="ADD1"><shadow type="text"><field name="TEXT"></field></shadow><block type="variables_get" id="*zJ{8uDDnjI!s@AA/3fj"><field name="VAR" id="Zhfx_O3}!1gCpf1]1@(r">temp</field></block></value><value name="ADD2"><shadow type="text"><field name="TEXT"></field></shadow><block type="typescript_expression" id="9QX1dlEn3ZE}Ci:XnOzG" editable="false"><field name="EXPRESSION">" °C\n"</field></block></value></block></value><next><block type="bluetooth_uart_write" id="qg6Qn]0jU!k@T4lq/l7l"><value name="data"><block type="text_join" id="4?*P@Q-y(AwOUg;p;z,D"><mutation items="3"></mutation><value name="ADD0"><shadow type="text" id="WC=0?b-1k#7%mo*y=12v"><field name="TEXT">Datos del MAX30102: </field></shadow></value><value name="ADD1"><shadow type="text"><field name="TEXT"></field></shadow><block type="variables_get" id="$#-;p6#{;53:3]A]IG]~"><field name="VAR" id="I8$e2+z@!L,FUt-wLB?m">sensorData</field></block></value><value name="ADD2"><shadow type="text"><field name="TEXT"></field></shadow><block type="typescript_expression" id="v_1rUb]xMNm07]=+TC(X" editable="false"><field name="EXPRESSION">"\n"</field></block></value></block></value><next><block type="device_print_message" id="Uja4*Z(Xf(zGc$~crb}U"><comment pinned="false" h="80" w="160">Mostrar datos en la pantalla de la micro:bit</comment><value name="text"><block type="text_join" id="KzKEbyMaw=Jo#LH_GSKY"><mutation items="2"></mutation><value name="ADD0"><shadow type="text" id="+aF;O#mmj*pC+JFg?q]^"><field name="TEXT">X:</field></shadow></value><value name="ADD1"><shadow type="text"><field name="TEXT"></field></shadow><block type="variables_get" id="J{mTW,BI-5eVPmOXR4i*"><field name="VAR" id="9wvx[F8Vn8Nv+j{jL}O7">x</field></block></value></block></value><next><block type="device_pause" id="YQd2y*AQC-k0giNYXna7"><value name="pause"><shadow type="timePicker" id="uM2),vno8b=3K^x:E~I#"><field name="ms">1000</field></shadow></value><next><block type="device_print_message" id="A7K)Z+Th;Xm1vt(N!oOQ"><value name="text"><block type="text_join" id="duX1foMSX]PO]3M:+).M"><mutation items="2"></mutation><value name="ADD0"><shadow type="text" id="IH-I_|-`k=u;CyKwQqZz"><field name="TEXT">T:</field></shadow></value><value name="ADD1"><shadow type="text"><field name="TEXT"></field></shadow><block type="variables_get" id="0AA[s|jek*f_br#t|JdV"><field name="VAR" id="Zhfx_O3}!1gCpf1]1@(r">temp</field></block></value></block></value><next><block type="device_pause" id="%N[n2t![.yoYO1utv_H["><value name="pause"><shadow type="timePicker" id="o0k|99rd-s|Fuyv%jjSI"><field name="ms">1000</field></shadow></value><next><block type="device_print_message" id="@M``sV6}o5z$jTLukMg0"><value name="text"><block type="text_join" id="U*Ig:;xtCK%d3y^snHs("><mutation items="2"></mutation><value name="ADD0"><shadow type="text" id="LkU.I-%El.3j:[}lbF(I"><field name="TEXT">S:</field></shadow></value><value name="ADD1"><shadow type="text"><field name="TEXT"></field></shadow><block type="variables_get" id="7|F1pa;h?h-n%N#1Kt20"><field name="VAR" id="I8$e2+z@!L,FUt-wLB?m">sensorData</field></block></value></block></value><next><block type="device_pause" id=";vF^@(K=vDOI.I!inPDF"><value name="pause"><shadow type="timePicker" id="S54HZg09BY)v5|W+UYkX"><field name="ms">1000</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="function_definition" id="W8|@J==65(Hk5oWQsUiW" x="1310" y="0"><mutation name="setupMAX30102" functionid="a[ZWAPNoGuq`HTsy20Q3"></mutation><field name="function_name">setupMAX30102</field><comment pinned="false" h="80" w="160">Configuración inicial del MAX30102</comment><statement name="STACK"><block type="i2c_writenumber" id="?dNN`laEF${tm_EToh}B"><field name="format">NumberFormat.UInt8LE</field><comment pinned="false" h="80" w="160">Resetear el sensor</comment><value name="address"><block type="variables_get" id="0brfur)ic0,y||=vM*_k"><field name="VAR" id="3UT{RjLShXrJ[IDGq}xI">MAX30102_I2C_ADDRESS</field></block></value><value name="value"><block type="variables_get" id="c^$FeNRO1kB`MXZcYEiU"><field name="VAR" id="#W`LsJ/ueQiF{5|iS2o3">MAX30102_MODE_CONFIG</field></block></value><value name="repeat"><shadow type="logic_boolean" id="1zb/iZE+ggOU}PVq^]#I"><field name="BOOL">FALSE</field></shadow></value><next><block type="i2c_writenumber" id="Rwzeh-L+S$Sthc;i-MDG"><field name="format">NumberFormat.UInt8LE</field><value name="address"><block type="variables_get" id="+CfY?hbk;;x~9k7jc+ru"><field name="VAR" id="3UT{RjLShXrJ[IDGq}xI">MAX30102_I2C_ADDRESS</field></block></value><value name="value"><shadow type="math_number" id="AW0[[Lv,=Dw#llTv]]UC"><field name="NUM">64</field></shadow></value><value name="repeat"><shadow type="logic_boolean" id="ELvdeuob-0wx=VI$chWP"><field name="BOOL">FALSE</field></shadow></value><next><block type="device_pause" id="^af:Ke[D^7rdhD6QcKwI"><value name="pause"><shadow type="timePicker" id="D]:(y2J@;Q9._sG[C[xw"><field name="ms">100</field></shadow></value><next><block type="i2c_writenumber" id="w2GxaC#Czo=Pp)FWk8)s"><field name="format">NumberFormat.UInt8LE</field><comment pinned="false" h="80" w="160">Configurar modo de SpO2</comment><value name="address"><block type="variables_get" id="05)Z8Is#DVwfHM*R!U=h"><field name="VAR" id="3UT{RjLShXrJ[IDGq}xI">MAX30102_I2C_ADDRESS</field></block></value><value name="value"><block type="variables_get" id="([`T.s,RU^;4`j-[?CTA"><field name="VAR" id="Qq3:;oI:aGoPvEna?(GL">MAX30102_PARTICLE_CONFIG</field></block></value><value name="repeat"><shadow type="logic_boolean" id="S2!)PcBtk0p}M)XMA{fF"><field name="BOOL">FALSE</field></shadow></value><next><block type="i2c_writenumber" id="X0aCD/[+,i7`uSgZ$8{|"><field name="format">NumberFormat.UInt8LE</field><value name="address"><block type="variables_get" id="kxA8UicUSGL$PR@v(LaF"><field name="VAR" id="3UT{RjLShXrJ[IDGq}xI">MAX30102_I2C_ADDRESS</field></block></value><value name="value"><shadow type="math_number" id="g8=zBA.7z/eNy|C^.NeM"><field name="NUM">3</field></shadow></value><value name="repeat"><shadow type="logic_boolean" id="?+_c}s@!YF2-}v|Y6*n#"><field name="BOOL">FALSE</field></shadow></value><next><block type="device_pause" id="pyw^?2EZ*sN|~:eg4cg1"><value name="pause"><shadow type="timePicker" id="@Y2z/`(8im]xcfWi2z,k"><field name="ms">100</field></shadow></value><next><block type="i2c_writenumber" id="ZU.oWLQc^0EPO:pCjIa:"><field name="format">NumberFormat.UInt8LE</field><comment pinned="false" h="80" w="160">Configurar LEDs</comment><value name="address"><block type="variables_get" id="B$%))YK!o(i?H|92:h:["><field name="VAR" id="3UT{RjLShXrJ[IDGq}xI">MAX30102_I2C_ADDRESS</field></block></value><value name="value"><block type="variables_get" id="I78O:}A`hb#o06E}?W40"><field name="VAR" id="Toozgh04V=9V_2y@J)F,">MAX30102_LED_CONFIG</field></block></value><value name="repeat"><shadow type="logic_boolean" id="sC=PbH?Qw9~u;Gqn}9bM"><field name="BOOL">FALSE</field></shadow></value><next><block type="i2c_writenumber" id="O$dqXmUWd[uB^#Oe+YJM"><field name="format">NumberFormat.UInt8LE</field><comment pinned="false" h="80" w="160">Intensidad del LED rojo</comment><value name="address"><block type="variables_get" id="nYPB}|Cy3[Nm]LZkLi=t"><field name="VAR" id="3UT{RjLShXrJ[IDGq}xI">MAX30102_I2C_ADDRESS</field></block></value><value name="value"><shadow type="math_number" id="x;38y}l7.cs-hl%w|gjc"><field name="NUM">36</field></shadow></value><value name="repeat"><shadow type="logic_boolean" id="0u$P?!!gZSI4+7V4%b:,"><field name="BOOL">FALSE</field></shadow></value><next><block type="i2c_writenumber" id="w(t=bSL%OTD0C/iu9(Uf"><field name="format">NumberFormat.UInt8LE</field><comment pinned="false" h="80" w="160">Intensidad del LED IR</comment><value name="address"><block type="variables_get" id="Y4S~c0,?+h3)uEk=93b,"><field name="VAR" id="3UT{RjLShXrJ[IDGq}xI">MAX30102_I2C_ADDRESS</field></block></value><value name="value"><shadow type="math_number" id="{#At4yjc5{*)zTMd*)j|"><field name="NUM">36</field></shadow></value><value name="repeat"><shadow type="logic_boolean" id="T]-}#$M~7!e~:z%2Ws(R"><field name="BOOL">FALSE</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="function_definition" id="s5RvSnj1ee!c$JpM0{+%" x="1738" y="0"><mutation name="readSensorData" functionid="BOq.rVg7bu{g8KgFuOwH"></mutation><field name="function_name">readSensorData</field><comment pinned="false" h="80" w="160">Leer datos del sensor MAX30102</comment><statement name="STACK"><block type="i2c_writenumber" id="fMS8!di3Nhx_v;oq:)?G"><field name="format">NumberFormat.UInt8LE</field><value name="address"><block type="variables_get" id="b?otklh6rUB;){^czIV)"><field name="VAR" id="3UT{RjLShXrJ[IDGq}xI">MAX30102_I2C_ADDRESS</field></block></value><value name="value"><shadow type="math_number" id="2nz)g0q9~;_i2NmGLW26"><field name="NUM">6</field></shadow></value><value name="repeat"><shadow type="logic_boolean" id="IFvzsD9#-noG12t$d:Ei"><field name="BOOL">FALSE</field></shadow></value><next><block type="variables_set" id="TU9XA(%WnBZ5?i#Ensrr"><field name="VAR" id="{V_?PjYC_d/4CLF7U-ow">data</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="pins_i2c_readnumber" id="t~*x*Ekkr%K#eL(3a60i"><field name="format">NumberFormat.UInt16BE</field><value name="address"><block type="variables_get" id="-PFm^M8j`e},NE4Z2J(I"><field name="VAR" id="3UT{RjLShXrJ[IDGq}xI">MAX30102_I2C_ADDRESS</field></block></value><value name="repeat"><shadow type="logic_boolean" id="0Lb~W|:To:m/Z#|k*)`="><field name="BOOL">FALSE</field></shadow></value></block></value><next><block type="function_return" id="/8sj`A]VA^,YiJSa.5i|"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="bu;^LK)R_X{8QD8jB`}^"><field name="VAR" id="{V_?PjYC_d/4CLF7U-ow">data</field></block></value></block></next></block></next></block></statement></block></xml>